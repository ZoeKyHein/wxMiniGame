# 元素生存 (Elemental Survivor) - 开发进度文档

## 1. 项目概述
- **核心玩法**: 类土豆兄弟 (Survivor-like) + 元素反应机制。
- **平台**: 微信小游戏 (原生 API)。
- **视图**: 横屏 (Landscape)。
- **时长**: 15分钟/局 (5/10分精英，15分Boss)。

## 2. 当前状态 (Current Status)
- **阶段**: 核心功能完成 (Core Features Complete)
- **任务**: Boss 战系统已实现，游戏核心循环完成。

## 3. 待办事项 (Todo List)

### Phase 1: 基础架构 (Infrastructure)
- [x] 清理“打飞机”Demo 的旧资源和代码。
- [x] 配置 `game.json` 为横屏模式。
- [x] 搭建 ECS (实体-组件-系统) 或 基础面向对象架构。
- [x] 实现基础的游戏循环 (Game Loop) 和 状态管理。
- [x] 实现主角移动 (虚拟摇杆)。
- [x] 实现基础武器与自动攻击。

### Phase 2: 核心战斗 (Core Combat)
- [x] 实现主角移动 (虚拟摇杆)。
- [x] 实现基础武器与自动攻击。
- [x] 实现敌人生成器 (简单的追踪 AI)。
- [x] 碰撞检测系统。
- [x] 玩家血量系统。
- [x] 敌人子弹系统。
- [x] Boss 战系统。

### Phase 3: 元素系统 (Elemental System) - *核心创新*
- [x] 定义基础元素 (火、水、雷)。
- [x] 实现元素附着机制。
- [x] 实现元素反应逻辑 (蒸发、超载)。
- [x] 浮动伤害数字显示。

### Phase 4: 游戏进程 (Game Loop & Meta)
- [x] 升级选择 UI (三选一)。
- [x] 计时器与波次管理 (90秒测试版，支持精英和Boss)。
- [x] 经验球系统。
- [x] 游戏结束/胜利界面。

## 4. 更新日志 (Change Log)
- **202X-XX-XX**: 项目启动，创建开发文档。
- **202X-XX-XX**: 实现基础游戏循环、主角移动、敌人AI。
- **202X-XX-XX**: 实现元素系统（火、水、雷）和元素反应（蒸发、超载）。
- **202X-XX-XX**: 实现 Roguelike 核心循环（经验球、升级系统、三选一UI）。
- **202X-XX-XX**: 实现生存压力系统（玩家血量、倒计时、精英怪）。
- **202X-XX-XX**: 实现 Boss 战系统（Boss 生成、弹幕攻击、胜利条件）。

## 5. 已实现功能清单

### 核心系统
- ✅ 游戏主循环和状态管理
- ✅ Canvas 渲染系统
- ✅ 触摸输入处理（虚拟摇杆）

### 玩家系统
- ✅ 主角移动（虚拟摇杆控制）
- ✅ 自动攻击系统
- ✅ 血量系统（100 HP）
- ✅ 无敌帧机制
- ✅ 受伤闪烁效果

### 敌人系统
- ✅ 普通敌人（红色，10 HP）
- ✅ 精英敌人（紫色，50 HP，30秒出现）
- ✅ Boss 敌人（黑色，500 HP，60秒出现）
- ✅ 敌人追踪 AI
- ✅ Boss 弹幕攻击（扇形三发）

### 战斗系统
- ✅ 玩家子弹（支持元素附魔）
- ✅ 敌人子弹（红色，15伤害）
- ✅ 碰撞检测（子弹-敌人、子弹-玩家、敌人-玩家）
- ✅ 浮动伤害数字
- ✅ 元素反应视觉反馈

### 元素系统
- ✅ 火元素（红色）
- ✅ 水元素（蓝色）
- ✅ 雷元素（橙色）
- ✅ 蒸发反应（水+火，2倍伤害）
- ✅ 超载反应（火+雷，1.5倍伤害 + AoE）

### 游戏进程
- ✅ 经验球系统（磁吸效果）
- ✅ 升级系统（经验条、等级显示）
- ✅ 三选一升级UI（元素附魔、攻速提升）
- ✅ 倒计时系统（90秒测试版）
- ✅ 波次管理（普通怪、精英、Boss）
- ✅ 游戏结束界面
- ✅ 胜利界面

### UI 系统
- ✅ 经验条（顶部）
- ✅ 倒计时显示（顶部居中）
- ✅ 等级显示（右上角）
- ✅ 血条（底部，带数值）
- ✅ 升级选择界面
- ✅ 游戏结束/胜利界面